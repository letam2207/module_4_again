<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Danh s√°ch c·∫ßu th·ªß Vi·ªát Nam</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(135deg, #b71c1c, #d32f2f);
      font-family: 'Segoe UI', sans-serif;
      color: #fff;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }

    .container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 10px;
      padding: 30px;
      margin-top: 40px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }

    h1 {
      color: #c62828;
      text-align: center;
      font-weight: 700;
      margin-bottom: 30px;
      position: relative;
    }

    h1::after {
      content: "‚òÖ";
      color: gold;
      font-size: 28px;
      position: absolute;
      right: 50%;
      transform: translateX(50%);
      top: 45px;
    }

    .message {
      text-align: center;
      font-weight: bold;
      color: #c62828;
      background: rgba(255, 235, 59, 0.2);
      border: 1px solid gold;
      padding: 10px;
      border-radius: 5px;
    }

    .player-card {
      border: 2px solid #c62828;
      border-radius: 12px;
      transition: 0.3s;
      background-color: #fff;
      color: #333;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      overflow: hidden;
    }

    .player-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    }

    .player-img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      transition: 0.3s;
    }

    .player-img:hover {
      filter: brightness(0.8);
      cursor: pointer;
    }

    .badge-status {
      font-size: 0.9rem;
      padding: 5px 10px;
      border-radius: 10px;
    }

    footer {
      text-align: center;
      color: #ffeb3b;
      margin-top: 40px;
      font-weight: 500;
    }

    .text-dark span {
      color: #000 !important;
    }

    .favorite-btn {
      background: none;
      border: none;
      color: #c62828;
      font-size: 1.3rem;
      transition: 0.3s;
    }

    .favorite-btn:hover {
      color: gold;
      transform: scale(1.2);
    }

    .btn-edit {
      background-color: #ffc107;
      border: none;
      color: #000;
      font-weight: 600;
    }

    .btn-edit:hover {
      background-color: #ffb300;
      color: #fff;
    }

    .btn-delete {
      background-color: #d32f2f;
      border: none;
      color: #fff;
      font-weight: 600;
    }

    .btn-delete:hover {
      background-color: #b71c1c;
    }

    .top-buttons {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>Danh s√°ch c·∫ßu th·ªß Vi·ªát Nam</h1>

  <!-- N√∫t tr√™n ƒë·∫ßu -->
  <div class="top-buttons">
    <a th:href="@{/players/save}" class="btn btn-success fw-bold">+ Th√™m c·∫ßu th·ªß m·ªõi</a>
    <a th:href="@{/players/favorites}" class="btn btn-outline-warning fw-bold">
      <i class="bi bi-heart-fill text-danger"></i> Xem danh s√°ch y√™u th√≠ch
    </a>
  </div>

  <!-- Form t√¨m ki·∫øm -->
  <form th:action="@{/players}" method="get" class="row g-3 align-items-end justify-content-center mb-4">
    <div class="col-md-3">
      <label class="form-label text-dark fw-bold">T√¨m theo t√™n:</label>
      <input type="text" name="searchName" th:value="${searchName}" class="form-control"
             placeholder="üîç Nh·∫≠p t√™n c·∫ßu th·ªß">
    </div>

    <div class="col-md-2">
      <label class="form-label text-dark fw-bold">T·ª´ ng√†y:</label>
      <input type="date" name="startDate" th:value="${startDate}" class="form-control">
    </div>

    <div class="col-md-2">
      <label class="form-label text-dark fw-bold">ƒê·∫øn ng√†y:</label>
      <input type="date" name="endDate" th:value="${endDate}" class="form-control">
    </div>

    <div class="col-md-2">
      <label class="form-label text-dark fw-bold">Hi·ªÉn th·ªã:</label>
      <input type="number" name="size" min="1" max="50" th:value="${size}" class="form-control">
    </div>

    <div class="col-md-2">
      <button type="submit" class="btn btn-warning fw-bold w-100">L·ªçc</button>
    </div>
  </form>

  <div th:if="${mess}" class="message mb-3" th:text="${mess}"></div>

  <div class="mb-3 text-dark fw-bold">
    <strong>S·ªë l∆∞·ª£ng ƒëƒÉng k√Ω ƒë√°:</strong>
    <span th:text="${registeredCount}" style="color: black;">0</span>/11
  </div>

  <!-- Card danh s√°ch c·∫ßu th·ªß -->
  <div class="row g-4">
    <div class="col-md-4 col-lg-3" th:each="player : ${playerPage}">
      <div class="card player-card">
        <a th:href="@{'/players/detail/' + ${player.id}}">
          <img th:src="${player.avatar != null ? player.avatar : '/images/default-avatar.png'}"
               class="player-img" alt="Avatar">
        </a>
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="card-title fw-bold text-danger mb-0" th:text="${player.name}">T√™n c·∫ßu th·ªß</h5>
            <!-- ‚ù§Ô∏è N√∫t y√™u th√≠ch -->
            <button type="button" class="favorite-btn" th:onclick="'addToFavorites(' + ${player.id} + ')'">
              <i class="bi bi-heart"></i>
            </button>
          </div>

          <p class="card-text mb-1"><strong>Ng√†y sinh:</strong> <span th:text="${#temporals.format(player.dob, 'dd/MM/yyyy')}"></span></p>
          <p class="card-text mb-1"><strong>V·ªã tr√≠:</strong> <span th:text="${player.position}"></span></p>
          <p class="card-text mb-1"><strong>Kinh nghi·ªám:</strong> <span th:text="${player.experience}"></span></p>
          <p class="card-text mb-1"><strong>ƒê·ªôi b√≥ng:</strong> <span th:text="${player.team != null ? player.team.name : 'Ch∆∞a c√≥'}"></span></p>

          <p>
            <span class="badge badge-status"
                  th:classappend="${player.status == 'ƒê√£ ƒëƒÉng k√Ω'} ? 'bg-success' : 'bg-secondary'"
                  th:text="${player.status}"></span>
          </p>

          <div class="d-flex justify-content-between mt-3">
            <a th:href="@{'/players/edit/' + ${player.id}}" class="btn btn-edit btn-sm w-50 me-1">S·ª≠a</a>
            <form th:action="@{'/players/delete/' + ${player.id}}" method="post" class="w-50">
              <button type="submit" class="btn btn-delete btn-sm w-100"
                      onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën xo√° c·∫ßu th·ªß n√†y?')">Xo√°</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Ph√¢n trang -->
  <nav class="pagination justify-content-center mt-4">
    <ul class="pagination">
      <li class="page-item" th:if="${playerPage.hasPrevious()}">
        <a class="page-link" th:href="@{/players(page=${playerPage.number - 1}, size=${size}, searchName=${searchName}, startDate=${startDate}, endDate=${endDate})}">‚¨Ö Tr∆∞·ªõc</a>
      </li>
      <li class="page-item disabled">
        <a class="page-link text-dark bg-light fw-bold">Trang [[${playerPage.number + 1}]] / [[${playerPage.totalPages}]]</a>
      </li>
      <li class="page-item" th:if="${playerPage.hasNext()}">
        <a class="page-link" th:href="@{/players(page=${playerPage.number + 1}, size=${size}, searchName=${searchName}, startDate=${startDate}, endDate=${endDate})}">Sau ‚û°</a>
      </li>
    </ul>
  </nav>
</div>

<footer>
  üáªüá≥ Giao di·ªán c·∫£m h·ª©ng t·ª´ L√° c·ªù Vi·ªát Nam ‚Äì T·ª± h√†o d√¢n t·ªôc üáªüá≥
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


</body>
</html>
